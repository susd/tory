<div class="row">
  <div class="large-12 columns">
    <h3><%= @device.best_name %></h3>
    <div class="meta">
      <%= @device.site.name %> | 
      <%= @device.created_at.strftime('%b %e, %Y %l:%m%p ') %>
    </div>
    <hr>
  </div>
</div>
  
<div class="row">
  <div class="medium-3 columns">
    
    <%= link_to 'Deploy', 'javascript:;', class: 'expand button' %>
    <%= link_to 'Upload', 'javascript:;', class: 'expand button' %>
    
    <ul class="side-nav">
      <% if @device.htmlfile.present? %>
      <li class="divider"></li>
      <li><%= link_to 'Populate from XML', parse_device_path(@device), method: :put %></li>
      <li><%= link_to 'View raw data', @device.htmlfile.url %></li>
      <% end %>
      <li class="divider"></li>
      <li><%= link_to 'Delete', @device, method: :delete, data: { confirm: 'Are you sure?' } %></li>
    </ul>
    
    <hr>
    
    <%= form_for @device do |f| %>
      <div class="field">
        <%= f.label :image_id %>
        <%= f.select :image_id, @image_map %>
      </div>
      <div class="actions">
        <%= f.submit 'update', class: 'button' %>
      </div>
    <% end %>
    
  </div>
    
  <div class="medium-6 columns">
    
    <table>
      <tr>
        <td>Manufacturer</td>
        <td><%= @device.make %></td>
      </tr>
      <tr>
        <td>Product</td>
        <td><%= @device.product %></td>
      </tr>
      <tr>
        <td>RAM</td>
        <td><%= @device.ram %></td>
      </tr>
      <tr>
        <td>CPU</td>
        <td>
          <%= @device.cpu %> 
          <%= @device.cpu_speed %> Mhz
        </td>
      </tr>
      <tr>
        <td>Mac Address</td>
        <td><%= @device.mac_address %></td>
      </tr>
      <tr>
        <td>UUID</td>
        <td><%= @device.uuid %></td>
      </tr>
    </table>
    
    
    <h4>Memory Configuration</h4>
    <ul>
      <% @device.banks.each do |pos, bank| %>
      <li><strong><%= bank['id'] %></strong> = <%= bank['size'] %></li>
      <% end %>
    </ul>
  </div>
  
  <div class="medium-3 columns">
    
    <h3>Task history</h3>
    
    <% if @tasks.any? %>
    
    <ul class="task-history">
      <% @tasks.each do |task| %>
      <li class="task">
        <b class="task-job"><%= task.job %></b><br>
        <span class="task-time"><%= task.updated_at.to_s(:short) %></span>
        <span class="task-state task-<%= task.state %>"><%= task.state %></span>
      </li>
      <% end %>
    </ul>
    
    <% else %>
    
    <p>No task history yet.</p>
    
    <% end %>
    
  </div>
    
</div>